"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseEventBody = exports.buildLambdaResponse = void 0;
const buildLambdaResponse = (context, statusCode = 200, body = {}, headers = { 'Content-Type': 'application/json' }) => {
    body.reqId = context.awsRequestId;
    return {
        statusCode,
        body: JSON.stringify(body),
        headers,
    };
};
exports.buildLambdaResponse = buildLambdaResponse;
const parseEventBody = (event) => {
    const isJsonContentType = event.headers?.[`content-type`]?.match(/application\/json/i);
    if (isJsonContentType) {
        const parsedBody = JSON.parse(event.body);
        return { ...event, body: parsedBody };
    }
    return event;
};
exports.parseEventBody = parseEventBody;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGFtYmRhVXRpbGl0eS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkxhbWJkYVV0aWxpdHkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBVUEsTUFBTSxtQkFBbUIsR0FBRyxDQUMxQixPQUFnQixFQUNoQixhQUFxQixHQUFHLEVBQ3hCLE9BQTRCLEVBQUUsRUFDOUIsVUFBa0MsRUFBRSxjQUFjLEVBQUUsa0JBQWtCLEVBQUUsRUFDeEQsRUFBRTtJQUNsQixJQUFJLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUM7SUFDbEMsT0FBTztRQUNMLFVBQVU7UUFDVixJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUM7UUFDMUIsT0FBTztLQUNSLENBQUM7QUFDSixDQUFDLENBQUM7QUFZTyxrREFBbUI7QUFWNUIsTUFBTSxjQUFjLEdBQUcsQ0FBQyxLQUFVLEVBQU8sRUFBRTtJQUN6QyxNQUFNLGlCQUFpQixHQUNyQixLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsY0FBYyxDQUFDLEVBQUUsS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUM7SUFDL0QsSUFBSSxpQkFBaUIsRUFBRSxDQUFDO1FBQ3RCLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFDLE9BQU8sRUFBRSxHQUFHLEtBQUssRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUM7SUFDeEMsQ0FBQztJQUNELE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQyxDQUFDO0FBRTRCLHdDQUFjIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlULTBcbmltcG9ydCB7IENvbnRleHQgfSBmcm9tICdhd3MtbGFtYmRhJztcblxuaW50ZXJmYWNlIExhbWJkYVJlc3BvbnNlIHtcbiAgc3RhdHVzQ29kZTogbnVtYmVyO1xuICBib2R5OiBzdHJpbmc7XG4gIGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG59XG5cbmNvbnN0IGJ1aWxkTGFtYmRhUmVzcG9uc2UgPSAoXG4gIGNvbnRleHQ6IENvbnRleHQsXG4gIHN0YXR1c0NvZGU6IG51bWJlciA9IDIwMCxcbiAgYm9keTogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9LFxuICBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0geyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbik6IExhbWJkYVJlc3BvbnNlID0+IHtcbiAgYm9keS5yZXFJZCA9IGNvbnRleHQuYXdzUmVxdWVzdElkO1xuICByZXR1cm4ge1xuICAgIHN0YXR1c0NvZGUsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgaGVhZGVycyxcbiAgfTtcbn07XG5cbmNvbnN0IHBhcnNlRXZlbnRCb2R5ID0gKGV2ZW50OiBhbnkpOiBhbnkgPT4ge1xuICBjb25zdCBpc0pzb25Db250ZW50VHlwZSA9XG4gICAgZXZlbnQuaGVhZGVycz8uW2Bjb250ZW50LXR5cGVgXT8ubWF0Y2goL2FwcGxpY2F0aW9uXFwvanNvbi9pKTtcbiAgaWYgKGlzSnNvbkNvbnRlbnRUeXBlKSB7XG4gICAgY29uc3QgcGFyc2VkQm9keSA9IEpTT04ucGFyc2UoZXZlbnQuYm9keSk7XG4gICAgcmV0dXJuIHsgLi4uZXZlbnQsIGJvZHk6IHBhcnNlZEJvZHkgfTtcbiAgfVxuICByZXR1cm4gZXZlbnQ7XG59O1xuXG5leHBvcnQgeyBidWlsZExhbWJkYVJlc3BvbnNlLCBwYXJzZUV2ZW50Qm9keSB9OyJdfQ==